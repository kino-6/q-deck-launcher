# Q-Deck Launcher - ユーザ操作テストガイド

## 起動方法

### 標準起動方法（常にこれを使用）

```powershell
cd q-deck-launcher
.\launch.ps1 -Force
```

**launch.ps1のオプション**:

- `-Force`: 既存のプロセスを強制終了（推奨）
- `-NoCleanup`: プロセスクリーンアップをスキップ
- `-StartPort 1420`: 開始ポート番号を指定

起動後、**F11キー**を押してオーバーレイを表示します。

### プロダクションビルド

```powershell
# Windowsインストーラーをビルド
npm run electron:build:win

# ビルド後、release/フォルダに実行ファイルが生成される
```

## テストシナリオ

### シナリオ1: ファイルドロップでボタン作成

1. エクスプローラーを開く
2. 任意の `.exe` ファイル（例：`notepad.exe`）を探す
3. F11でオーバーレイを表示
4. ファイルをグリッドの空セルにドラッグ&ドロップ
5. ✅ ボタンが自動作成される
6. ✅ アイコンが自動抽出される
7. ✅ ファイル名がラベルになる

### シナリオ2: 画像ファイルをドロップ

1. 画像ファイル（`.png`, `.jpg`）を用意
2. F11でオーバーレイを表示
3. 画像をグリッドにドロップ
4. ✅ 画像を開くボタンが作成される

### シナリオ3: ボタン削除と永続化

1. F11でオーバーレイを表示
2. 既存のボタンを右クリック
3. コンテキストメニューから「削除」を選択
4. ✅ ボタンが消える
5. F5でページをリロード
6. ✅ ボタンが消えたまま（永続化されている）

### シナリオ4: グリッドサイズ変更

1. F11でオーバーレイを表示
2. グリッド背景を右クリック
3. 「設定」を選択
4. グリッドサイズを変更（例：3×4 → 4×6）
5. ✅ グリッドサイズが変更される
6. ✅ 既存のボタンが保持される

### シナリオ5: テーマ変更

1. F11でオーバーレイを表示
2. グリッド背景を右クリック
3. 「設定」を選択
4. テーマカラーを変更（例：Dark → Blue）
5. ✅ 背景色が変更される

### シナリオ6: ボタンのテーマ変更

1. F11でオーバーレイを表示
2. ボタンを右クリック
3. 「テーマ」を選択
4. 好きなテーマを選択
5. ✅ ボタンの色が変更される

### シナリオ7: 複数ファイルの一括ドロップ

1. エクスプローラーで複数のファイルを選択
2. F11でオーバーレイを表示
3. 選択したファイルをグリッドにドロップ
4. ✅ 複数のボタンが自動配置される
5. ✅ 空いているセルに順番に配置される

## トラブルシューティング

### オーバーレイが表示されない

- F11キーを再度押してみる
- 開発サーバーが起動しているか確認（`.\launch.ps1 -Force`）

### ドロップが反応しない

- ファイルを直接グリッドセルにドロップしているか確認
- ドロップ時に緑色のハイライトが表示されるか確認

### ボタンが動作しない

- ブラウザのコンソール（F12）でエラーを確認
- ファイルパスが正しいか確認

## 設定ファイルの場所

```text
Windows: %APPDATA%\q-deck-launcher\config.yaml
```

手動で編集することも可能です。

## 開発者向けデバッグ

```powershell
# コンソールログを確認
# ブラウザでF12を押してDevToolsを開く

# 設定ファイルを確認
notepad $env:APPDATA\q-deck-launcher\config.yaml

# 設定をリセット
Remove-Item $env:APPDATA\q-deck-launcher\config.yaml
# アプリを再起動すると初期設定が作成される
```
